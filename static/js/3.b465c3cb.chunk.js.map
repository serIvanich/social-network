{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","hoc/withAuthRedirect.tsx","components/Profile/Profile.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusHook.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileData.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/AddPostForm/AddPostForm.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainerWithHooks.tsx"],"names":["module","exports","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","props","restProps","to","ProfileStatusWithHooks","status","updateStatus","useState","editMode","setEditMode","newStatus","setStatus","useEffect","className","s","onDoubleClick","autoFocus","onBlur","onChange","e","currentTarget","value","ProfileDataFormReduxForm","reduxForm","form","handleSubmit","profile","error","onSubmit","style","formSummaryError","createField","Textarea","Input","type","Object","keys","contacts","map","key","contact","Contact","contactTitle","contactValue","ProfileData","isOwner","goToEditMode","aboutMe","fullName","lookingForAJob","lookingForAJobDescription","onClick","ProfileInfo","imgForChange","setImgForChange","Preload","forDeactive","pic","src","descriptionBlock","title","photos","small","large","userPhoto","target","files","length","savePhoto","initialValues","formData","saveProfile","then","Post","name","message","likeCount","item","maxLength15","maxLengthCreator","PostReduxForm","undefined","required","MyPosts","postsElements","posts","reverse","p","String","id","postBlock","addPost","MyPostsMemorized","React","memo","profilePage","action","Profile","content","MyPostsContainer","compose","withRouter","authorizedUserId","userId","getUserProfile","getStatus","match","params","history","push","console"],"mappings":"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","file":"static/js/3.b465c3cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pic\":\"ProfileInfo_pic__1L8cc\",\"descriptionBlock\":\"ProfileInfo_descriptionBlock__YAhUn\",\"userPhoto\":\"ProfileInfo_userPhoto__1z6AJ\",\"contact\":\"ProfileInfo_contact__2Gr2r\",\"status\":\"ProfileInfo_status__1Ygyi\"};","\r\nimport React, { ComponentType, FC } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { AppStateType } from '../redux/redux-store'\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType) => ({ isAuth: state.auth.isAuth })\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: ComponentType<WCP>) {\r\n\r\n    const RedirectComponent: React.FC< MapStatePropsType> = (props) => {\r\n\r\n        let {isAuth,...restProps} = props\r\n\r\n        if (props.isAuth === false) {\r\n            return <Redirect to='/login' />\r\n        }\r\n\r\n        return <WrappedComponent  {...restProps as WCP } />\r\n\r\n\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect<MapStatePropsType, {}, WCP, AppStateType>(mapStateToPropsForRedirect)(RedirectComponent)\r\n    return ConnectedAuthRedirectComponent\r\n\r\n\r\n\r\n}\r\n\r\ntype MapStatePropsType = {isAuth: boolean}\r\n// type MapDispatchPropsType = {}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__RvC_o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBlock\":\"MyPosts_postBlock__2dyho\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__Cw6P8\"};","import React, {useState, useEffect, ChangeEvent} from 'react'\r\nimport s from './ProfileInfo.module.css'\r\n\r\nconst ProfileStatusWithHooks: React.FC<ProfileStatusType>= ({status, updateStatus}) => {\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [newStatus, setStatus] = useState(status)\r\n    \r\n    useEffect ( () => {\r\n        setStatus(status)\r\n    }, [status])\r\n    let activeEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n    let deactiveEditMode = () => {\r\n        setEditMode(false)\r\n        updateStatus(newStatus)\r\n    }\r\n    let changeStatus = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n                <div className={s.status}><b>my status: </b>\r\n                    <span onDoubleClick={activeEditMode}>{status || '-----'}</span>\r\n                </div>\r\n            }\r\n            {editMode &&\r\n                <div>\r\n                    <input autoFocus={true} \r\n                    onBlur={deactiveEditMode} \r\n                    onChange={changeStatus} \r\n                    value={status} />\r\n                </div>\r\n            }    \r\n        </div>\r\n    ) \r\n}\r\nexport default ProfileStatusWithHooks\r\n\r\ntype ProfileStatusType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n}","import React, { FC } from \"react\"\r\nimport { InjectedFormProps, reduxForm } from \"redux-form\"\r\nimport { createField, Input, Textarea } from \"../../common/FormsControls/FormsControls\"\r\nimport s from './ProfileInfo.module.css'\r\nimport style from '../../common/FormsControls/FormsControls.module.css'\r\nimport {ContactsType, GetFormValuesKeys, ProfileType} from '../../../type/type'\r\n\r\n\r\nconst ProfileDataForm: FC<InjectedFormProps<ProfileType, ProfileDataFormOwnType> & ProfileDataFormOwnType> = ({handleSubmit, profile, error}) => { \r\n    \r\n    return <form onSubmit={handleSubmit}>\r\n        <div><button > save </button></div>\r\n        {error && <div><button className={style.formSummaryError}>{error}</button></div>}\r\n        <div>\r\n            <b>about me:</b> {createField<ProfileDataFormValueTypeKeys>(\"about me\", \"aboutMe\", [], Textarea) }\r\n        </div>\r\n        <div>\r\n            <b>my full name:</b> {createField<ProfileDataFormValueTypeKeys>(\"full name\", \"fullName\", [], Input) }\r\n        </div>\r\n        <div>\r\n            <b>looking for a job:</b> {createField<ProfileDataFormValueTypeKeys>(\"\", \"lookingForAJob\", [], Input, {type: \"checkbox\"})}\r\n        </div>\r\n        \r\n        <div>\r\n            <b>my skills:</b> {createField<ProfileDataFormValueTypeKeys>(\"my skills\", \"lookingForAJobDescription\", [], Textarea)}\r\n        </div>\r\n        \r\n        <div>\r\n            <b>contacts:</b> {\r\n            Object\r\n                .keys(profile.contacts)\r\n                .map(key => {\r\n            return <div key={key} className={s.contact}> \r\n                <b>{key}:</b> {createField(key, \"contacts.\" + key, [], Input)} </div>})}\r\n\r\n        </div>\r\n    </form>\r\n    \r\n  }\r\n\r\n   \r\n\r\n  const ProfileDataFormReduxForm = reduxForm<ProfileType, ProfileDataFormOwnType>({form: 'edit-profile'})(ProfileDataForm)\r\n  \r\n  export default ProfileDataFormReduxForm\r\n\r\n  export type ProfileDataFormValueType = {\r\n    aboutMe: string\r\n    fullName: string\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string\r\n    contacts: ContactsType\r\n  }\r\n  type ContactsTypeValueKeys = Extract<\"contacts.github\" | \"contacts.vk\" | \"contacts.facebook\" |\r\n                                         \"contacts.instagram\" | \"contacts.twitter\" | \"contacts.website\" |\r\n                                          \"contacts.youtube\" | \"contacts.mainLink\", string>\r\n//   type ContactsTypeValueKeys = Extract<keyof ContactsType, string>\r\n  type ProfileDataFormValueTypeKeys = GetFormValuesKeys<ProfileDataFormValueType>\r\n  export type ProfileDataFormOwnType = {\r\n      profile: ProfileType\r\n  }","import React from 'react'\r\nimport { ContactsType, ProfileType } from '../../../type/type'\r\nimport s from './ProfileInfo.module.css'\r\n\r\nconst ProfileData: React.FC<PropsType> = ({ profile, isOwner, goToEditMode }) => {\r\n    return (<div>\r\n  \r\n      <div>\r\n        <b>about me:</b> {profile.aboutMe}\r\n      </div>\r\n      <div>\r\n        <b>my full name:</b> {profile.fullName}\r\n      </div>\r\n      <div>\r\n        <b>looking for a job:</b> {profile.lookingForAJob ? \"yes\" : \"no\"}\r\n      </div>\r\n      {profile.lookingForAJob &&\r\n        <div>\r\n          <b>my skills:</b> {profile.lookingForAJobDescription}\r\n        </div>\r\n      }\r\n      <div>\r\n        <b>contacts:</b> {\r\n        Object\r\n          .keys(profile.contacts)\r\n          .map(key => {\r\n          return <Contact key={key} contactTitle={key} contactValue={profile.contacts[key as keyof ContactsType]} />\r\n        })}\r\n      </div>\r\n      {isOwner && <div><button onClick={goToEditMode}> edit </button></div>}\r\n    </div>)\r\n  \r\n  }\r\n  \r\n  \r\n  \r\n  const Contact: React.FC<ContactsPropsType>= ({ contactTitle, contactValue }) => {\r\n    return <div className={s.contact}><b>{contactTitle}:</b> {contactValue}</div>\r\n  }\r\n\r\n  export default ProfileData\r\n\r\n  type PropsType = {\r\n      profile: ProfileType \r\n      isOwner: boolean\r\n      goToEditMode: () => void\r\n      \r\n  }\r\n  type ContactsPropsType = {\r\n    contactTitle: string\r\n    contactValue: string | undefined\r\n  } \r\n  ","import React, { ChangeEvent, useState } from 'react'\r\nimport s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preload/Preload'\r\nimport ProfileStatus from './ProfileStatusHook'\r\nimport ProfileDataForm, {ProfileDataFormValueType, ProfileDataFormOwnType} from './ProfileDataForm'\r\nimport {ProfileComponentType} from '../../Profile/Profile'\r\nimport ProfileData from './ProfileData'\r\nimport { ProfileType } from '../../../type/type'\r\nimport userPhoto from '../../../assets/images/images.jpg'\r\n\r\nconst ProfileInfo: React.FC<ProfileComponentType>= (props) => {\r\n  let [editMode, setEditMode] = useState(false)\r\n  let [imgForChange, setImgForChange] = useState(false)\r\n\r\n  if (!props.profile) {\r\n    return <Preloader />\r\n  }\r\n\r\n\r\n  const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n    debugger\r\n    if (e.target.files && e.target.files.length) {\r\n      props.savePhoto(e.target.files[0])\r\n      forDeactive()\r\n    }\r\n\r\n  }\r\n  const forActive = () => {\r\n\r\n    setImgForChange(true)\r\n  }\r\n\r\n  const forDeactive = () => {\r\n    debugger\r\n    setImgForChange(false)\r\n  }\r\n  \r\n  const onSubmit = (formData: ProfileType) => {\r\n\r\n    props.saveProfile(formData).then(() => {\r\n      setEditMode(false)\r\n    })\r\n\r\n  }\r\n\r\n  return (\r\n\r\n    <div>\r\n      <div className={s.pic}>\r\n        <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTD_0HFgQ9KsHOm4FF55__N9ZsFgXHXB9JxDg&usqp=CAU' />\r\n      </div>\r\n      <div className={s.descriptionBlock}>\r\n\r\n        <img title={'change'} onClick={forActive} src={props.profile.photos.small || props.profile.photos.large || userPhoto} className={s.userPhoto} />\r\n\r\n        {imgForChange && <input type={'file'} onChange={onMainPhotoSelected} />}\r\n        {props.isOwner && <ProfileStatus status={props.status} updateStatus={props.updateStatus} /> ||\r\n          <div className={s.status}>{props.status}</div>}\r\n\r\n\r\n        {editMode ? <ProfileDataForm initialValues={props.profile} profile={props.profile} onSubmit={onSubmit} />\r\n          : <ProfileData goToEditMode={() => { setEditMode(true) }} profile={props.profile} isOwner={props.isOwner} />}\r\n\r\n\r\n      </div>\r\n\r\n\r\n    </div>)\r\n}\r\n\r\n\r\nexport default ProfileInfo","import React, { FC } from 'react'\r\nimport s from './Post.module.css'\r\n\r\nconst Post: FC<PostType> = ({name, message, likeCount}) => {\r\n    \r\n    return (\r\n    <div className={s.item}>\r\n        <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRMx6nyE6BtBUpxyikA6w1afyKRpCc1M38QrA&usqp=CAU'/>\r\n        {name}:____ {message}\r\n        <div>\r\n            -like-{likeCount}\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default Post\r\ntype PostType = {\r\n    name: string\r\n    message: string\r\n    likeCount: number\r\n}","import React from 'react'\r\nimport { InjectedFormProps, reduxForm } from \"redux-form\"\r\nimport { maxLengthCreator, required } from \"../../../../utils/validator/validator\"\r\nimport { createField, Textarea } from \"../../../common/FormsControls/FormsControls\"\r\n\r\n\r\nconst maxLength15 = maxLengthCreator(15)\r\n\r\nconst PostForm: React.FC<InjectedFormProps<MyPostFormValueType, PropsType> & PropsType>= ({handleSubmit}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>                       \r\n            { createField<MyPostFormValueTypeKeys>(undefined, 'message', [required, maxLength15], Textarea) }           \r\n            <button >add post</button>\r\n            \r\n        \r\n        </form>\r\n    )\r\n}\r\n\r\nexport const PostReduxForm = reduxForm<MyPostFormValueType, PropsType>({form:'post'})(PostForm)\r\n\r\nexport type MyPostFormValueType = {\r\n    message: string\r\n}\r\ntype MyPostFormValueTypeKeys = Extract<keyof MyPostFormValueType, string>\r\ntype PropsType = {}","import React, { FC } from 'react'\r\nimport s from './MyPosts.module.css'\r\nimport Post from './Post/Post'\r\nimport { MapDispatchPropsType, MapStatePropsType } from './MyPostsContainer'\r\nimport { MyPostFormValueType, PostReduxForm } from './AddPostForm/AddPostForm'\r\n\r\n\r\n\r\n\r\n\r\nconst MyPosts: FC<MyPostType > =  (props) => {\r\n    \r\n    \r\n\r\n    let postsElements = \r\n        [...props.posts]\r\n        .reverse()\r\n        .map( p => <Post key={p.id} name={String(p.id)} likeCount={p.likeCount} message={p.message} />)\r\n    \r\n    // let newPostElement = React.createRef //???\r\n    const onAddPost = (formData:MyPostFormValueType) => {\r\n        \r\n        props.addPost(formData.message)\r\n    }\r\n    return (\r\n    <div className={s.postBlock}>\r\n        <h3>My posts</h3>\r\n        <PostReduxForm onSubmit={onAddPost} />\r\n        <div className={s.posts}>\r\n            {postsElements}  \r\n        </div>\r\n     </div>)\r\n}\r\nconst MyPostsMemorized = React.memo(MyPosts)\r\n\r\nexport default MyPostsMemorized\r\n\r\n\r\n\r\ntype MyPostType = MapStatePropsType & MapDispatchPropsType \r\n// type MyPostOwnType = {\r\n//     onSubmit: (formData: MyPostFormValueType) => void\r\n// }","import React from 'react'\r\n\r\n\r\nimport MyPosts from './MyPosts'\r\nimport { connect } from 'react-redux'\r\nimport { action } from '../../../redux/profile-reducer'\r\nimport { PostType } from '../../../type/type'\r\nimport { Action } from 'redux'\r\nimport { AppStateType } from '../../../redux/redux-store'\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n        // value: state.profilePage.newPostText\r\n    }\r\n}\r\n\r\nexport default  connect(mapStateToProps,{addPost: action.addPost})(MyPosts)\r\n\r\nexport type MapStatePropsType = {\r\n    posts: Array<PostType>\r\n}\r\nexport type MapDispatchPropsType = {\r\n    addPost: (message: string) => Action\r\n}","import React, { FC } from 'react'\r\nimport s from './Profile.module.css'\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo'\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer'\r\nimport { ProfileType } from '../../type/type'\r\n\r\n\r\n\r\nconst Profile: FC<ProfileComponentType> = (props) => {\r\n    \r\n    \r\n    return (\r\n        <div className={s.content}>\r\n            <ProfileInfo profile={props.profile} status={props.status} \r\n            updateStatus={props.updateStatus} isOwner={props.isOwner} \r\n            savePhoto={props.savePhoto} saveProfile={props.saveProfile} />\r\n            <MyPostsContainer  />\r\n        </div>)\r\n}\r\nexport default Profile\r\n\r\nexport type ProfileComponentType = {\r\n    profile: ProfileType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (profile: ProfileType) => Promise<any>\r\n    isOwner: boolean\r\n    // userPhoto: string\r\n}","import React, { ChangeEvent, ComponentType, FC, PropsWithChildren, useEffect } from 'react'\r\nimport Profile from './Profile'\r\nimport { connect } from 'react-redux'\r\nimport { getUserProfile, getStatus, updateStatus, savePhoto, saveProfile } from '../../redux/profile-reducer'\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom'\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect'\r\nimport { compose } from 'redux'\r\nimport { ProfileType } from '../../type/type'\r\nimport { AppStateType } from '../../redux/redux-store'\r\n\r\n\r\n\r\nconst ProfileContainer: FC<ProfileContainerType & RouteComponentProps<PathParamsType>> = (props) => {\r\n    \r\n    useEffect(() => {\r\n        let userId: number | null = +props.match.params.userId\r\n        if (!userId) {\r\n            userId = props.authorizedUserId\r\n            if (!userId) {\r\n                props.history.push('/login')\r\n            }\r\n        }\r\n\r\n        if (!userId) {\r\n            console.error('Id should exists in URL param or in state(authorizedUserId)')\r\n        } else {\r\n        props.getUserProfile(userId)\r\n        props.getStatus(userId)\r\n        }\r\n    }, [props.match.params.userId])\r\n\r\n    return <Profile {...props} profile={props.profile} saveProfile={props.saveProfile}\r\n        status={props.status} updateStatus={props.updateStatus}\r\n        isOwner={!props.match.params.userId} savePhoto={props.savePhoto} />\r\n}\r\n\r\n\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        profile: state.profilePage.profile,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.userId,\r\n\r\n    }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n\r\n    withRouter,\r\n    withAuthRedirect,\r\n    connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, savePhoto, saveProfile })\r\n)\r\n    (ProfileContainer)\r\n\r\n\r\ntype MapStatePropsType = {\r\n    profile: ProfileType | null\r\n    status: string\r\n    authorizedUserId: number | null\r\n}\r\ntype MapDispatchPropsType = {\r\n    getUserProfile: (userId: number) => void\r\n    getStatus: (userId: number) => void\r\n    updateStatus: (status: string) => void\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (profile: ProfileType) => Promise<any>\r\n}\r\ntype ProfileOwnPropsType = {\r\n    // userPhoto: string\r\n\r\n}\r\ntype PathParamsType = {\r\n    userId: string\r\n}\r\n\r\ntype ProfileContainerType = MapStatePropsType & MapDispatchPropsType & ProfileOwnPropsType \r\n"],"sourceRoot":""}